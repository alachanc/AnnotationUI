{"ast":null,"code":"import _slicedToArray from\"C:/Users/18126/IdeaProjects/demo/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import Modal from'react-modal';import{useState,useEffect,useRef}from'react';import{StompSessionProvider,useSubscription,useStompClient}from\"react-stomp-hooks\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var customStyles={content:{top:'50%',left:'50%',right:'auto',bottom:'auto',marginRight:'-50%',transform:'translate(-50%, -50%)'}};var stompURL='http://localhost:8080/websocket-topic';var buildOutMsg=function buildOutMsg(t,op,x){return{topicLabel:t,topicOp:op,topicXpath:x};};function App(){return/*#__PURE__*/_jsx(StompSessionProvider,{url:stompURL,children:/*#__PURE__*/_jsx(Topics,{})});}function Topics(){//Topics := [{'topicLabel': '', 'topicXpath': ''}]\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),topics=_useState2[0],setTopics=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),topicModal=_useState4[0],setTopicModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),xpathModal=_useState6[0],setXpathModal=_useState6[1];var toggleTModal=function toggleTModal(){return setTopicModal(function(x){return!x;});};var toggleXModal=function toggleXModal(){return setXpathModal(function(x){return!x;});};var topicsToOptions=function topicsToOptions(){return topics?topics.map(function(t){return/*#__PURE__*/_jsx(\"option\",{value:t.topicLabel,children:t.topicLabel},t.topicLabel);}):/*#__PURE__*/_jsx(_Fragment,{});};var getDefaultT=function getDefaultT(){return topics?topics[0].topicLabel:'';};var getDefaultX=function getDefaultX(){return topics?topics[0].topicXpath:'';};var stompClient=useStompClient();useSubscription(\"/topic/topics\",function(m){return setTopics(JSON.parse(m.body).topics.map(function(t){var _t$split=t.split(\"::\"),_t$split2=_slicedToArray(_t$split,2),tl=_t$split2[0],tx=_t$split2[1];return{topicLabel:tl,topicXpath:tx};}));});var sendMessage=function sendMessage(m){if(stompClient){console.log(m);stompClient.publish({destination:\"/app/topics\",body:JSON.stringify(m)});}else{console.log(\"Send Message did not work!!!\");}};var handleSwitch=function handleSwitch(e){console.log(e);e.preventDefault();e.stopPropagation();var t=topics.filter(function(to){return to.topicLabel===e.target.value;}).pop();sendMessage(buildOutMsg(t.topicLabel,'SWITCH',t.topicXpath));};var handleSubmit=function handleSubmit(e){e.preventDefault();e.stopPropagation();console.log(e);var _e$nativeEvent$submit=e.nativeEvent.submitter.name.split('_'),_e$nativeEvent$submit2=_slicedToArray(_e$nativeEvent$submit,2),k=_e$nativeEvent$submit2[0],k_=_e$nativeEvent$submit2[1];var v=e.target[0].value;if(k_===\"T\"){sendMessage(buildOutMsg(v,k,\"\"));toggleTModal();}else{console.log(e);sendMessage(buildOutMsg(\"\",k,v));toggleXModal();}};useEffect(function(){sendMessage(buildOutMsg('','',''));},[stompClient]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Current Topic: \",getDefaultT()]}),/*#__PURE__*/_jsx(\"select\",{id:\"TOPICS\",onChange:handleSwitch,children:topicsToOptions()}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleTModal,children:\"Modify Topic Model\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:topicModal,onRequestClose:toggleTModal,style:customStyles,ariaHideApp:false,children:[/*#__PURE__*/_jsx(\"div\",{children:\"Modify Topic\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:getDefaultT()}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"ADD_T\",children:\"Add Sub-Topic\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"EDIT_T\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"DELETE_T\",children:\"Delete\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{defaultValue:getDefaultX(),readOnly:true}),/*#__PURE__*/_jsx(\"button\",{onSubmit:handleSubmit,type:\"submit\",name:\"DELETE_X\",children:\"Delete Last Xpath\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleXModal,children:\"Edit Xpath\"})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:xpathModal,onRequestClose:toggleXModal,style:customStyles,ariaHideApp:false,children:[/*#__PURE__*/_jsx(\"div\",{children:\"Modify XPath\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{defaultValue:getDefaultX(),type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"EDIT_X\",children:\"DONE\"})]})]})]})]});}export default App;","map":{"version":3,"names":["Modal","useState","useEffect","useRef","StompSessionProvider","useSubscription","useStompClient","customStyles","content","top","left","right","bottom","marginRight","transform","stompURL","buildOutMsg","t","op","x","topicLabel","topicOp","topicXpath","App","Topics","topics","setTopics","topicModal","setTopicModal","xpathModal","setXpathModal","toggleTModal","toggleXModal","topicsToOptions","map","getDefaultT","getDefaultX","stompClient","m","JSON","parse","body","split","tl","tx","sendMessage","console","log","publish","destination","stringify","handleSwitch","e","preventDefault","stopPropagation","filter","to","target","value","pop","handleSubmit","nativeEvent","submitter","name","k","k_","v"],"sources":["C:/Users/18126/IdeaProjects/demo/src/main/frontend/src/App.js"],"sourcesContent":["\r\nimport './App.css';\r\nimport Modal from 'react-modal';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  StompSessionProvider,\r\n  useSubscription,\r\n  useStompClient\r\n} from \"react-stomp-hooks\";\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    right: 'auto',\r\n    bottom: 'auto',\r\n    marginRight: '-50%',\r\n    transform: 'translate(-50%, -50%)',\r\n  },\r\n}\r\n\r\nconst stompURL = 'http://localhost:8080/websocket-topic'\r\nconst buildOutMsg = (t, op, x) => { return { topicLabel: t, topicOp: op, topicXpath: x } }\r\n\r\nfunction App() {\r\n  return (\r\n    <StompSessionProvider url={stompURL}>\r\n      <Topics />\r\n    </StompSessionProvider>\r\n  );\r\n}\r\n\r\nfunction Topics() {\r\n  //Topics := [{'topicLabel': '', 'topicXpath': ''}]\r\n  const [topics, setTopics] = useState(null);\r\n  const [topicModal, setTopicModal] = useState(false);\r\n  const [xpathModal, setXpathModal] = useState(false);\r\n\r\n  const toggleTModal = () => setTopicModal(x => !x)\r\n  const toggleXModal = () => setXpathModal(x => !x)\r\n  const topicsToOptions = () => topics ? topics.map(t => { return <option key={t.topicLabel} value={t.topicLabel}>{t.topicLabel}</option> }) : <></>\r\n  const getDefaultT = () => topics ? topics[0].topicLabel : ''\r\n  const getDefaultX = () => topics ? topics[0].topicXpath : ''\r\n\r\n  const stompClient = useStompClient();\r\n\r\n  useSubscription(\"/topic/topics\", (m) => setTopics(JSON.parse(m.body).topics.map(t=>{ var [tl, tx] = t.split(\"::\");\r\n  return {topicLabel: tl, topicXpath: tx}})));\r\n\r\n  const sendMessage = (m) => {\r\n    if (stompClient) {\r\n    console.log(m)\r\n      stompClient.publish({\r\n        destination: \"/app/topics\",\r\n        body: JSON.stringify(m)\r\n      })\r\n    } else {\r\n      console.log(\"Send Message did not work!!!\")\r\n    }\r\n  }\r\n\r\n  const handleSwitch = (e) => {\r\n  console.log(e);\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    var t = topics.filter(to=>to.topicLabel === e.target.value).pop()\r\n    sendMessage(buildOutMsg(t.topicLabel, 'SWITCH', t.topicXpath))\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    console.log(e)\r\n    var [k, k_] = e.nativeEvent.submitter.name.split('_')\r\n    var v = e.target[0].value\r\n    if (k_ === \"T\") {\r\n      sendMessage(buildOutMsg(v, k, \"\"))\r\n      toggleTModal()\r\n    } else {\r\n    console.log(e)\r\n      sendMessage(buildOutMsg(\"\", k, v))\r\n      toggleXModal()\r\n    }\r\n  }\r\n  useEffect(()=>{ sendMessage(buildOutMsg('', '', '')) }, [stompClient])\r\n  return (\r\n\r\n    <div>\r\n      <div>\r\n        <div>Current Topic: {getDefaultT()}</div>\r\n        <select id=\"TOPICS\" onChange={handleSwitch}>\r\n          {topicsToOptions()}\r\n        </select>\r\n        <button onClick={toggleTModal}>Modify Topic Model</button>\r\n        <Modal isOpen={topicModal} onRequestClose={toggleTModal} style={customStyles} ariaHideApp={false}>\r\n          <div>Modify Topic</div>\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              type=\"text\"\r\n              defaultValue={getDefaultT()}/>\r\n            <button type=\"submit\" name=\"ADD_T\">Add Sub-Topic</button>\r\n            <button type=\"submit\" name=\"EDIT_T\">Edit</button>\r\n            <button type=\"submit\" name=\"DELETE_T\">Delete</button>\r\n          </form>\r\n        </Modal>\r\n      </div>\r\n      <div>\r\n        <div>\r\n          <input defaultValue={getDefaultX()} readOnly />\r\n          <button onSubmit={handleSubmit} type=\"submit\" name=\"DELETE_X\">Delete Last Xpath</button>\r\n          <button onClick={toggleXModal} >Edit Xpath</button>\r\n        </div>\r\n        <Modal isOpen={xpathModal} onRequestClose={toggleXModal} style={customStyles} ariaHideApp={false}>\r\n          <div>Modify XPath</div>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              defaultValue={getDefaultX()}\r\n              type=\"text\"/>\r\n            <button type=\"submit\" name=\"EDIT_X\">DONE</button>\r\n          </form>\r\n        </Modal>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}